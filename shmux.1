.TH SHMUX 8 "$Date: 2002-07-06 20:53:13 $
.DA July 4, 2002
.SH NAME
shmux - Shell Multiplexor
.SH SYNOPSIS
.B shmux
[
.B -h
|
.B -V
]

.B shmux
[
.B -dDpqstv
] [
.B -M \fImax\fP
] [
.B -P \fItimeout\fP
] [
.B -T \fItimeout\fP
]
.B -c \fIcommand\fP \fItargets...\fP

.SH DESCRIPTION

\fBshmux\fP is program for executing the same \fIcommand\fP on many hosts
in parallel.  For each target, a child process is spawned by \fBshmux\fP,
and a shell on the target obtained one of the supported methods: \fIrsh\fP,
\fIssh\fP, or \fIsh\fP.  The output produced by the children is received
and output in turn by \fBshmux\fP.

The default method may be set by using the \fB-m\fP option, and may be
overridden for any target by prefixing the target name by the method and a
colon.  Two special methods, \fIssh1\fP and \fIssh2\fP may be used to
select the SSH protocol version 1 or 2, respectively.  For the \fIsh\fP
method, it is up to the specified \fIcommand\fP to contact the target.  In
order for the executed \fIcommand\fP to know which target it is being
invoked for, the \fISHMUX_TARGET\fP environment variable is set by
\fBshmux\fP.

Before executing the specified \fIcommand\fP, \fBshmux\fP will optionally
ping each target to ensure that it can be reached, and/or run a dummy test
\fIcommand\fP to make sure that the target not only is alive, but that it
is possible to execute a \fIcommand\fP on it.  Both these tests are
typically run with a fairly short timeout to quickly dismiss unavailable
targets rather than waiting for the standard (longer) network timeout.

.SH OPTIONS

.IP "\fB-h\fP"
Display a brief help message.
.IP "\fB-V\fP"
Display the version information.
.IP "\fB-m \fImethod\fP"
Defines the default method used to run a shell on targets.
.IP "\fB-M \fImax\fP"
Defines the maximum number of spawned processes.
.IP "\fB-p\fP"
Ping targets to verify they are alive before doing anything.
.IP "\fB-P \fItimeout\fP"
Defines the initial target ping timeout in milliseconds, see
\fIfping(8)\fP.  (Implies \fB-p\fP.)
.IP "\fB-t\fP"
Before executing the specified \fIcommand\fP for a target, send a simple
echo test and verify that the output is correct.  This is a step above the
ping test as it verifies that it is possible to get a shell on the target.
If this option is specified twice (or once when \fB-T\fP is used), output
for failed tests will be displayed to help the user understand what went
wrong.
.IP "\fB-T \fItimeout\fP"
Defines the test timeout in seconds.  (Implies \fB-t\fP.)
.IP "\fB-q\fP"
Suppress the final summary of results.
.IP "\fB-s\fP"
Suppress the progress status line.
.IP "\fB-v\fP"
Produce a more verbose output by prefixing each line of output with the
corresponding target name.
.IP "\fB-d\fP"
Display internal status messages.
.IP "\fB-D\fP"
Display internal debug messages.

.SH ENVIRONMENT
\fBshmux\fP will use the following environment variables if set:

.IP SHMUX_SH
Specify the shell to use for targets using the \fIsh\fP method.  (Default
is "/bin/sh".)
.IP SHMUX_RSH
Specify an alternative command to "rsh" to use for targets using the
\fIrsh\fP method.
.IP SHMUX_SSH
Specify an alternative command to "ssh" to use for targets using the
\fIssh\fP, \fIssh1\fP or \fIssh2\fP method
.IP SHMUX_SSH1
Specify an alternative command to "ssh" to use for targets using the
\fIssh1\fP method.  If set, this will override \fISHMUX_SSH\fP.
.IP SHMUX_SSH2
Specify an alternative command to "ssh" to use for targets using the
\fIssh2\fP method.  If set, this will override \fISHMUX_SSH\fP.

.SH SEE ALSO
.IR fping (8),
.IR sh (1),
.IR rsh (1),
.IR ssh (1).

.SH AVAILABILITY
The latest official release of \fBshmux\fP is available on the web.
The home page is http://web.taranis.org/shmux/

.SH AUTHOR
Christophe Kalt <kalt@taranis.org>
